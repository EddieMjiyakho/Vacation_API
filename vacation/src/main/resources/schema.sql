-- H2 2.3.232;
;             
CREATE USER IF NOT EXISTS "SA" SALT '269025a90f5bba5f' HASH '03bafa6cf4eb99d90b8b0e97246c07666096b8bdc05dce8a8e5a22d88544b79d' ADMIN;         
CREATE MEMORY TABLE "PUBLIC"."EMPLOYEES"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 5) NOT NULL,
    "NAME" CHARACTER VARYING(255) NOT NULL,
    "EMAIL" CHARACTER VARYING(255) NOT NULL,
    "IS_MANAGER" BOOLEAN DEFAULT FALSE,
    "REMAINING_VACATION_DAYS" INTEGER DEFAULT 30
);  
ALTER TABLE "PUBLIC"."EMPLOYEES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4" PRIMARY KEY("ID");    
-- 4 +/- SELECT COUNT(*) FROM PUBLIC.EMPLOYEES;               
INSERT INTO "PUBLIC"."EMPLOYEES" VALUES
(1, 'John Employee', 'john@company.com', FALSE, 25),
(2, 'Sarah Manager', 'sarah@company.com', TRUE, 30),
(3, 'Mike Employee', 'mike@company.com', FALSE, 15),
(4, 'Lisa Manager', 'lisa@company.com', TRUE, 30); 
CREATE MEMORY TABLE "PUBLIC"."VACATION_REQUESTS"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 5) NOT NULL,
    "AUTHOR_ID" BIGINT NOT NULL,
    "STATUS" CHARACTER VARYING(20) DEFAULT 'pending',
    "RESOLVED_BY_ID" BIGINT,
    "REQUEST_CREATED_AT" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    "VACATION_START_DATE" DATE NOT NULL,
    "VACATION_END_DATE" DATE NOT NULL
);         
ALTER TABLE "PUBLIC"."VACATION_REQUESTS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_2" PRIMARY KEY("ID");            
-- 4 +/- SELECT COUNT(*) FROM PUBLIC.VACATION_REQUESTS;       
INSERT INTO "PUBLIC"."VACATION_REQUESTS" VALUES
(1, 1, 'approved', 2, TIMESTAMP '2025-08-15 22:45:47.244685', DATE '2025-12-01', DATE '2025-12-05'),
(2, 1, 'approved', 2, TIMESTAMP '2025-08-15 22:45:47.244685', DATE '2025-11-10', DATE '2025-11-15'),
(3, 3, 'rejected', 4, TIMESTAMP '2025-08-15 22:45:47.244685', DATE '2025-12-10', DATE '2025-12-20'),
(4, 1, 'pending', NULL, TIMESTAMP '2025-08-15 22:55:29.025202', DATE '2025-12-10', DATE '2025-12-15');     
ALTER TABLE "PUBLIC"."EMPLOYEES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_43" UNIQUE NULLS DISTINCT ("EMAIL");     
ALTER TABLE "PUBLIC"."VACATION_REQUESTS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_2F0" FOREIGN KEY("RESOLVED_BY_ID") REFERENCES "PUBLIC"."EMPLOYEES"("ID") NOCHECK;
ALTER TABLE "PUBLIC"."VACATION_REQUESTS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_2F" FOREIGN KEY("AUTHOR_ID") REFERENCES "PUBLIC"."EMPLOYEES"("ID") NOCHECK;      
